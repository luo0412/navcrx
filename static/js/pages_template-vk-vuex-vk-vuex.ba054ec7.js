(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_template-vk-vuex-vk-vuex"],{2701:function(t,e,n){"use strict";n.r(e);var r=n("9e29"),a=n.n(r);for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);e["default"]=a.a},"2d4f":function(t,e,n){"use strict";var r;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",[t._v("Vuex可以用来做全局状态管理。\n\t\t而此例子是演示将当前登录用户信息存入Vuex，以便于在其他页面中也能直接渲染或获取用户信息")]),n("v-uni-view",{staticStyle:{"margin-top":"10rpx"}},[t._v("说明:"),n("v-uni-view",{staticStyle:{"margin-top":"10rpx"}},[t._v("1、"),n("v-uni-text",[t._v("$user")]),t._v("对应 store/modules 目录下的js文件"),n("br"),t._v("以下两个方式均可以对 vuex 数据进行操作"),n("br"),n("br"),t._v("方式一："),n("br"),t._v("获取 Vuex 数据："),n("br"),t._v("vk.getVuex('$user.userInfo')"),n("br"),t._v("更新 Vuex 数据："),n("br"),t._v("vk.setVuex('$user.userInfo.avatar', avatar)"),n("br"),n("br"),t._v("方式二："),n("br"),t._v("获取 Vuex 数据："),n("br"),t._v("vk.vuex.get('$user.userInfo')"),n("br"),t._v("更新 Vuex 数据："),n("br"),t._v("vk.vuex.set('$user.userInfo.avatar', avatar);"),n("br"),t._v("触发 Vuex action："),n("br"),t._v("vk.vuex.dispatch('$user/addFootprint', data);"),n("br")],1)],1),t.vk.getVuex("$user.userInfo._id")?n("v-uni-view",{staticStyle:{color:"red","margin-top":"10rpx","font-size":"36rpx"}},[t._v("当前登录用户："+t._s(t.vk.getVuex("$user.userInfo.nickname")||t.vk.getVuex("$user.userInfo.username"))),n("v-uni-image",{staticStyle:{width:"70rpx",height:"70rpx","border-radius":"50%"},attrs:{src:t.vk.getVuex("$user.userInfo.avatar"),mode:"aspectFill"}})],1):t._e(),n("v-uni-view",{staticStyle:{"margin-top":"20rpx"}},[n("v-uni-input",{attrs:{type:"text",placeholder:"用户名/邮箱/手机号"},model:{value:t.form1.username,callback:function(e){t.$set(t.form1,"username",e)},expression:"form1.username"}}),n("v-uni-input",{attrs:{type:"text",password:"true",placeholder:"密码"},model:{value:t.form1.password,callback:function(e){t.$set(t.form1,"password",e)},expression:"form1.password"}}),n("v-uni-button",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.register.apply(void 0,arguments)}}},[t._v("注册")]),n("v-uni-button",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.login.apply(void 0,arguments)}}},[t._v("登录")]),n("v-uni-button",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadAvatar.apply(void 0,arguments)}}},[t._v("上传到云储存(并设置为头像)")]),n("v-uni-button",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.logout.apply(void 0,arguments)}}},[t._v("退出")])],1)],1)},u=[]},"4d2c":function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,".content[data-v-493f258f]{padding:15px;font-size:%?28?%;color:#303133}.content uni-input[data-v-493f258f]{height:46px;border:solid 1px #ddd;border-radius:5px;margin-bottom:15px;padding:0 15px;display:block}.content uni-button[data-v-493f258f]{margin-bottom:15px}.content uni-navigator[data-v-493f258f]{display:inline-block;color:#007aff;border-bottom:solid 1px #007aff;font-size:16px;line-height:24px;margin-bottom:15px}.tips[data-v-493f258f]{text-align:center;line-height:20px;font-size:14px;color:#999;margin-bottom:20px}",""]),t.exports=e},6442:function(t,e,n){"use strict";var r=n("be1d"),a=n.n(r);a.a},"8d98":function(t,e,n){"use strict";n.r(e);var r=n("2d4f"),a=n("2701");for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);n("6442");var o,i=n("f0c5"),s=Object(i["a"])(a["default"],r["b"],r["c"],!1,null,"493f258f",null,!1,r["a"],o);e["default"]=s.exports},"9e29":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={data:function(){return{form1:{username:"admin",password:"123456"}}},onLoad:function(t){},methods:{register:function(){var t=this.form1;vk.userCenter.register({data:t,success:function(t){vk.alert("注册成功!")}})},login:function(){var t=this.form1;vk.userCenter.login({data:t,success:function(t){vk.setVuex("$user.userInfo",t.userInfo),vk.alert("登陆成功!")}})},logout:function(){vk.userCenter.logout({success:function(t){vk.setVuex("$user.userInfo",{}),vk.alert("退出成功")}})},uploadAvatar:function(){uni.chooseImage({count:1,sizeType:["compressed"],success:function(t){vk.callFunctionUtil.uploadFile({title:"上传中...",filePath:t.tempFilePaths[0],fileType:"image",success:function(t){vk.userCenter.setAvatar({data:{avatar:t.fileID},success:function(){vk.setVuex("$user.userInfo.avatar",t.fileID)}})}})}})}},computed:{}};e.default=r},be1d:function(t,e,n){var r=n("4d2c");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var a=n("4f06").default;a("493113c4",r,!0,{sourceMap:!1,shadowMode:!1})}}]);